<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>F2802x Burn In Unit: Tmp.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">F2802x Burn In Unit
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Tmp.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Temperature sensor functions.  
<a href="#details">More...</a></p>
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="a00081.png" border="0" usemap="#_tmp_8hdep" alt=""/></div>
<map name="_tmp_8hdep" id="_tmp_8hdep">
<area shape="rect" id="node2" href="a00015.html" title="Common include file for the project. " alt="" coords="5,80,91,107"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac80e67c94bf6570094bba2248b9586f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00058.html#ac80e67c94bf6570094bba2248b9586f3">ADC_SW3A_STATE</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="separator:ac80e67c94bf6570094bba2248b9586f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63e298aff78f6afee6ebffa60c1de62a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00058.html#a63e298aff78f6afee6ebffa60c1de62a">ADC_SW3B_STATE</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="separator:a63e298aff78f6afee6ebffa60c1de62a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c0e4f915b6ac0c3af9a27d604f1f7b1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00058.html#a6c0e4f915b6ac0c3af9a27d604f1f7b1">ADC_I2C_BASE_ADDR</a>&#160;&#160;&#160;0x48</td></tr>
<tr class="separator:a6c0e4f915b6ac0c3af9a27d604f1f7b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fd3aabe18504a5314a5d0e71e3bc495"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00058.html#a5fd3aabe18504a5314a5d0e71e3bc495">ADC_I2C_ADDR</a>&#160;&#160;&#160;(<a class="el" href="a00058.html#a6c0e4f915b6ac0c3af9a27d604f1f7b1">ADC_I2C_BASE_ADDR</a> | <a class="el" href="a00058.html#ac80e67c94bf6570094bba2248b9586f3">ADC_SW3A_STATE</a>) | (<a class="el" href="a00058.html#a63e298aff78f6afee6ebffa60c1de62a">ADC_SW3B_STATE</a> &lt;&lt; 1)</td></tr>
<tr class="separator:a5fd3aabe18504a5314a5d0e71e3bc495"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a448e8a52be570dfe9fdddb2045039534"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00058.html#a448e8a52be570dfe9fdddb2045039534">ADC_NUM_CHNL</a>&#160;&#160;&#160;0x08</td></tr>
<tr class="separator:a448e8a52be570dfe9fdddb2045039534"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a03d0b939a8dda552c9fe3319a82485"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00058.html#a5a03d0b939a8dda552c9fe3319a82485">ADC_VREF</a>&#160;&#160;&#160;5.0</td></tr>
<tr class="separator:a5a03d0b939a8dda552c9fe3319a82485"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9be6401f8c9339711816bec5ca55dd88"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00058.html#a9be6401f8c9339711816bec5ca55dd88">ADC_STPS</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:a9be6401f8c9339711816bec5ca55dd88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d41a70e126c748f2c99c3ff8228eb1b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00058.html#a6d41a70e126c748f2c99c3ff8228eb1b">TMP_V0C_OFST</a>&#160;&#160;&#160;0.4</td></tr>
<tr class="separator:a6d41a70e126c748f2c99c3ff8228eb1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f910bb108922c8686a139977510af53"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00058.html#a0f910bb108922c8686a139977510af53">TMP_SCL_OFST</a>&#160;&#160;&#160;<a class="el" href="a00058.html#a6d41a70e126c748f2c99c3ff8228eb1b">TMP_V0C_OFST</a> * <a class="el" href="a00058.html#a9be6401f8c9339711816bec5ca55dd88">ADC_STPS</a> / <a class="el" href="a00058.html#a5a03d0b939a8dda552c9fe3319a82485">ADC_VREF</a></td></tr>
<tr class="separator:a0f910bb108922c8686a139977510af53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc66f9f90ea4746679f5d26c834ddea5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00058.html#acc66f9f90ea4746679f5d26c834ddea5">TMP_E_T_COLD</a>&#160;&#160;&#160;1.5</td></tr>
<tr class="separator:acc66f9f90ea4746679f5d26c834ddea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3e441d5071e094ff4f2aeb9d47f9a102"><td class="memItemLeft" align="right" valign="top">Uint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00058.html#a3e441d5071e094ff4f2aeb9d47f9a102">initTemperature</a> (void)</td></tr>
<tr class="separator:a3e441d5071e094ff4f2aeb9d47f9a102"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74292ec2fc953664dbf7be82f1656b09"><td class="memItemLeft" align="right" valign="top">Uint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00058.html#a74292ec2fc953664dbf7be82f1656b09">readTemperature</a> (Uint16 chnl, float32 *tmpDest)</td></tr>
<tr class="separator:a74292ec2fc953664dbf7be82f1656b09"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Temperature sensor functions. </p>
<p>The temperature sensor (MCP9701) output is read via an external ADC (ADS7830) that is connected to the I2C bus at address 10010xx where 'xx' is dependent upon the state of switch 3 (SW3) on the Ctrl PCB, which the user should record in the macros ADC_SW3A_STATE and ADC_SW3B_STATE.</p>
<p>All temperatures are in degrees Celsius.</p>
<dl class="section warning"><dt>Warning</dt><dd>Before any temperature functions can be used the I2C peripheral MUST be initialised, using i2cInit(), and <a class="el" href="a00058.html#a3e441d5071e094ff4f2aeb9d47f9a102">initTemperature()</a> must be run - <a class="el" href="a00058.html#a3e441d5071e094ff4f2aeb9d47f9a102">initTemperature()</a> will require the interrupts to be enabled globally.</dd></dl>
<dl class="section see"><dt>See Also</dt><dd>i2cInit()</dd></dl>
<table class="doxtable">
<tr>
<th align="center">ADS7830 Ch #</th><th align="center">Signal </th><th align="center">Chnl selector </th><th align="center">ADC Sel Code  </th></tr>
<tr>
<td align="center">CH0 </td><td align="center">TEMP1 </td><td align="center">load1 (0) </td><td align="center">0 </td></tr>
<tr>
<td align="center">CH1 </td><td align="center">TEMP2 </td><td align="center">load2 (1) </td><td align="center">4 </td></tr>
<tr>
<td align="center">CH2 </td><td align="center">TEMP3 </td><td align="center">load3 (2) </td><td align="center">1 </td></tr>
<tr>
<td align="center">CH3 </td><td align="center">TEMP4 </td><td align="center">load4 (3) </td><td align="center">5 </td></tr>
<tr>
<td align="center">CH4 </td><td align="center">TEMP5 </td><td align="center">XFMR_STAGE (4)</td><td align="center">2 </td></tr>
<tr>
<td align="center">CH5 </td><td align="center">TEMP6 </td><td align="center">AC_STAGE (5) </td><td align="center">6 </td></tr>
<tr>
<td align="center">CH6 </td><td align="center">TEMP_EXT1 </td><td align="center">EXT_1 (6) </td><td align="center">3 </td></tr>
<tr>
<td align="center">CH7 </td><td align="center">TEMP_EXT2 </td><td align="center">EXT_2 (7) </td><td align="center">7 </td></tr>
</table>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a5fd3aabe18504a5314a5d0e71e3bc495"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_I2C_ADDR&#160;&#160;&#160;(<a class="el" href="a00058.html#a6c0e4f915b6ac0c3af9a27d604f1f7b1">ADC_I2C_BASE_ADDR</a> | <a class="el" href="a00058.html#ac80e67c94bf6570094bba2248b9586f3">ADC_SW3A_STATE</a>) | (<a class="el" href="a00058.html#a63e298aff78f6afee6ebffa60c1de62a">ADC_SW3B_STATE</a> &lt;&lt; 1)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ADS7830 ADC complete I2C address. </p>

</div>
</div>
<a class="anchor" id="a6c0e4f915b6ac0c3af9a27d604f1f7b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_I2C_BASE_ADDR&#160;&#160;&#160;0x48</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ADS7830 ADC base I2C address. </p>

</div>
</div>
<a class="anchor" id="a448e8a52be570dfe9fdddb2045039534"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_NUM_CHNL&#160;&#160;&#160;0x08</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ADS7830 ADC number of temperature channels. </p>

</div>
</div>
<a class="anchor" id="a9be6401f8c9339711816bec5ca55dd88"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_STPS&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ADS7830 ADC number of steps. </p>

</div>
</div>
<a class="anchor" id="ac80e67c94bf6570094bba2248b9586f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_SW3A_STATE&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The state of switch 3a; ON = 0x01, OFF = 0x00. </p>

</div>
</div>
<a class="anchor" id="a63e298aff78f6afee6ebffa60c1de62a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_SW3B_STATE&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The state of switch 3b; ON = 0x01, OFF = 0x00. </p>

</div>
</div>
<a class="anchor" id="a5a03d0b939a8dda552c9fe3319a82485"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_VREF&#160;&#160;&#160;5.0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>ADS7830 ADC reference voltage (volts). </p>

</div>
</div>
<a class="anchor" id="acc66f9f90ea4746679f5d26c834ddea5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TMP_E_T_COLD&#160;&#160;&#160;1.5</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>MCP9701 Error at lowest operating temperature ( \( ^\circ\) C), calculated as shown in Microchip AN1001. </p>

</div>
</div>
<a class="anchor" id="a0f910bb108922c8686a139977510af53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TMP_SCL_OFST&#160;&#160;&#160;<a class="el" href="a00058.html#a6d41a70e126c748f2c99c3ff8228eb1b">TMP_V0C_OFST</a> * <a class="el" href="a00058.html#a9be6401f8c9339711816bec5ca55dd88">ADC_STPS</a> / <a class="el" href="a00058.html#a5a03d0b939a8dda552c9fe3319a82485">ADC_VREF</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Scaled temperature offset. </p>

</div>
</div>
<a class="anchor" id="a6d41a70e126c748f2c99c3ff8228eb1b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TMP_V0C_OFST&#160;&#160;&#160;0.4</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>MCP9701 Temperature sensor \( V_{0{^\circ}C}\) (volts). </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a3e441d5071e094ff4f2aeb9d47f9a102"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Uint16 initTemperature </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialises the system for temperature readings. The I2C peripheral must be initialised before this function is used </p>
<dl class="section see"><dt>See Also</dt><dd>i2cInit(). </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Error status. </dd></dl>

</div>
</div>
<a class="anchor" id="a74292ec2fc953664dbf7be82f1656b09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Uint16 readTemperature </td>
          <td>(</td>
          <td class="paramtype">Uint16&#160;</td>
          <td class="paramname"><em>chnl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float32 *&#160;</td>
          <td class="paramname"><em>tmpDest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Queries the current temperature on the specified ADC channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">chnl</td><td>Specifies the channel the temperature is to be read from. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">tmpDest</td><td>Address of the memory location at which to place the query result ( \( ^\circ\) C). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error status. </dd></dl>

</div>
</div>
</div><!-- contents -->
<hr class="footer"/><address class="footer"><small>
Wed Nov 6 2013
<!--
Generated on Thu Apr 25 2013 10:35:11 for F2802x_BurnInUnit by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
-->
</small></address>
</body>
</html>
